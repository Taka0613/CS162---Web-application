{"ast":null,"code":"var _jsxFileName = \"/Users/takaya/Desktop/hierarchical-todo-list-app/frontend/src/components/Item.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport API from '../api';\nimport CollapsibleItem from './CollapsibleItem';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction Item({\n  item,\n  refreshItems,\n  level = 1\n}) {\n  _s();\n  const [subItems, setSubItems] = useState([]);\n  const [isCollapsed, setIsCollapsed] = useState(false);\n  const [newSubItemTitle, setNewSubItemTitle] = useState('');\n  const fetchSubItems = async () => {\n    const res = await API.get(`/items/${item.list_id}`);\n    setSubItems(res.data.items.filter(subItem => subItem.parent_item_id === item.item_id));\n  };\n  useEffect(() => {\n    if (level < 3) {\n      fetchSubItems();\n    }\n  }, [item.item_id]);\n  const handleAddSubItem = async () => {\n    await API.post('/items/', {\n      list_id: item.list_id,\n      parent_item_id: item.item_id,\n      title: newSubItemTitle\n    });\n    setNewSubItemTitle('');\n    fetchSubItems();\n  };\n  const handleToggleComplete = async () => {\n    await API.put(`/items/${item.item_id}`, {\n      is_completed: !item.is_completed\n    });\n    refreshItems();\n  };\n  const handleDelete = async () => {\n    await API.delete(`/items/${item.item_id}`);\n    refreshItems();\n  };\n  return /*#__PURE__*/_jsxDEV(\"li\", {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginLeft: level * 20\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        style: {\n          textDecoration: item.is_completed ? 'line-through' : 'none'\n        },\n        children: item.title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleToggleComplete,\n        children: item.is_completed ? 'Undo' : 'Complete'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleDelete,\n        children: \"Delete\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 9\n      }, this), level < 3 && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setIsCollapsed(!isCollapsed),\n          children: isCollapsed ? 'Expand' : 'Collapse'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 13\n        }, this), !isCollapsed && /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            value: newSubItemTitle,\n            onChange: e => setNewSubItemTitle(e.target.value),\n            placeholder: \"New Sub-Item\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 62,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleAddSubItem,\n            children: \"Add Sub-Item\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 67,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n            children: subItems.map(subItem => /*#__PURE__*/_jsxDEV(Item, {\n              item: subItem,\n              refreshItems: fetchSubItems,\n              level: level + 1\n            }, subItem.item_id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 70,\n              columnNumber: 21\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 68,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true)]\n      }, void 0, true)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 44,\n    columnNumber: 5\n  }, this);\n}\n_s(Item, \"MyR5oTBQf8+J+ivTqsmZ5T8XNXo=\");\n_c = Item;\nexport default Item;\nvar _c;\n$RefreshReg$(_c, \"Item\");","map":{"version":3,"names":["React","useState","useEffect","API","CollapsibleItem","jsxDEV","_jsxDEV","Fragment","_Fragment","Item","item","refreshItems","level","_s","subItems","setSubItems","isCollapsed","setIsCollapsed","newSubItemTitle","setNewSubItemTitle","fetchSubItems","res","get","list_id","data","items","filter","subItem","parent_item_id","item_id","handleAddSubItem","post","title","handleToggleComplete","put","is_completed","handleDelete","delete","children","style","marginLeft","textDecoration","fileName","_jsxFileName","lineNumber","columnNumber","onClick","value","onChange","e","target","placeholder","map","_c","$RefreshReg$"],"sources":["/Users/takaya/Desktop/hierarchical-todo-list-app/frontend/src/components/Item.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport API from '../api';\nimport CollapsibleItem from './CollapsibleItem';\n\nfunction Item({ item, refreshItems, level = 1 }) {\n  const [subItems, setSubItems] = useState([]);\n  const [isCollapsed, setIsCollapsed] = useState(false);\n  const [newSubItemTitle, setNewSubItemTitle] = useState('');\n\n  const fetchSubItems = async () => {\n    const res = await API.get(`/items/${item.list_id}`);\n    setSubItems(\n      res.data.items.filter((subItem) => subItem.parent_item_id === item.item_id)\n    );\n  };\n\n  useEffect(() => {\n    if (level < 3) {\n      fetchSubItems();\n    }\n  }, [item.item_id]);\n\n  const handleAddSubItem = async () => {\n    await API.post('/items/', {\n      list_id: item.list_id,\n      parent_item_id: item.item_id,\n      title: newSubItemTitle,\n    });\n    setNewSubItemTitle('');\n    fetchSubItems();\n  };\n\n  const handleToggleComplete = async () => {\n    await API.put(`/items/${item.item_id}`, { is_completed: !item.is_completed });\n    refreshItems();\n  };\n\n  const handleDelete = async () => {\n    await API.delete(`/items/${item.item_id}`);\n    refreshItems();\n  };\n\n  return (\n    <li>\n      <div style={{ marginLeft: level * 20 }}>\n        <span\n          style={{ textDecoration: item.is_completed ? 'line-through' : 'none' }}\n        >\n          {item.title}\n        </span>\n        <button onClick={handleToggleComplete}>\n          {item.is_completed ? 'Undo' : 'Complete'}\n        </button>\n        <button onClick={handleDelete}>Delete</button>\n        {level < 3 && (\n          <>\n            <button onClick={() => setIsCollapsed(!isCollapsed)}>\n              {isCollapsed ? 'Expand' : 'Collapse'}\n            </button>\n            {!isCollapsed && (\n              <>\n                <input\n                  value={newSubItemTitle}\n                  onChange={(e) => setNewSubItemTitle(e.target.value)}\n                  placeholder=\"New Sub-Item\"\n                />\n                <button onClick={handleAddSubItem}>Add Sub-Item</button>\n                <ul>\n                  {subItems.map((subItem) => (\n                    <Item\n                      key={subItem.item_id}\n                      item={subItem}\n                      refreshItems={fetchSubItems}\n                      level={level + 1}\n                    />\n                  ))}\n                </ul>\n              </>\n            )}\n          </>\n        )}\n      </div>\n    </li>\n  );\n}\n\nexport default Item;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}